document.addEventListener('DOMContentLoaded', function() { // DOM Ready


//toggle
  
  var dataToggle = document.querySelectorAll('[data-toggle="toggle"]');  
  
  if ( dataToggle.length > 0 ) {
    Array.prototype.forEach.call(dataToggle, function(el, i){

      el.addEventListener('click',function(event){
        //event.preventDefault();
        
        var idToHide = this.getAttribute('data-id-hide');
        var idToShow = this.getAttribute('data-id-show');
    
        var dataTimes = this.getAttribute('data-times');
        
        var showAnimation = this.getAttribute('data-animation-show');
        var hideAnimation = this.getAttribute('data-animation-hide');
        
        
        //Si hay datatimes = 0, no hay límite, si hay 1..se limita cambiando el contador a 0
            
        if(dataTimes == 1){
          this.setAttribute('data-times','0');
          animatron.animateOut(this,hideAnimation);
        }else if (dataTimes === 0){
          return false;
        }  
        
        animatron.animateOut(idToHide,hideAnimation);
        
        
        var el = document.querySelector(idToHide);
        
        
        var animateOut = function (){
          animatron.animateIn(idToShow,showAnimation);      
        };
        
        el.addEventListener('webkitAnimationEnd',animateOut);
        el.addEventListener('oanimationend',animateOut);
        el.addEventListener('msAnimationEnd',animateOut);
        el.addEventListener('animationend',animateOut);
            
        //cambiamos el orden de los atributos
        this.setAttribute('data-id-show',idToHide);
        this.setAttribute('data-id-hide',idToShow);
        
      });
  

    });          
  }

  
}); // Cierre DOM Ready abierto al inicio de la página


